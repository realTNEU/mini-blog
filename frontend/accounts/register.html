{% extends 'base.html' %}

{% block title %}Register - MiniBlog{% endblock %}

{% block content %}
<div class="container" style="max-width: 520px; padding-top: 3rem; padding-bottom: 3rem;">
    <div data-aos="fade-up">
        <div class="text-center mb-8">
            <div class="inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-green-600 to-emerald-600 rounded-2xl mb-4">
                <i class="fas fa-user-plus text-white text-2xl"></i>
            </div>
            <h1 class="text-3xl font-bold gradient-text">Join MiniBlog</h1>
            <p style="color: var(--text-muted); margin-top: 0.5rem;">Create your account and start sharing your stories</p>
        </div>

        <form method="post" id="registerForm" class="card card-body glass-effect">
            {% csrf_token %}
            
            <div class="form-group">
                <label for="username" class="form-label">
                    <i class="fas fa-user" style="margin-right: 0.5rem; color: var(--success);"></i>Username
                </label>
                <input 
                    type="text" 
                    id="username" 
                    name="username" 
                    required
                    class="form-control"
                    placeholder="Choose a username"
                >
                <p class="form-text">3-30 characters, letters and numbers only</p>
            </div>
            
            <div class="form-group">
                <label for="email" class="form-label">
                    <i class="fas fa-envelope" style="margin-right: 0.5rem; color: var(--success);"></i>Email Address
                </label>
                <input 
                    type="email" 
                    id="email" 
                    name="email" 
                    required
                    class="form-control"
                    placeholder="your@email.com"
                >
            </div>
            
            <div class="form-group">
                <label for="password" class="form-label">
                    <i class="fas fa-lock" style="margin-right: 0.5rem; color: var(--success);"></i>Password
                </label>
                <input 
                    type="password" 
                    id="password" 
                    name="password" 
                    required
                    class="form-control"
                    placeholder="Create a strong password"
                >
                <p class="form-text">Minimum 8 characters recommended</p>
            </div>
            
            <div class="form-group">
                <label for="password_confirm" class="form-label">
                    <i class="fas fa-check-circle" style="margin-right: 0.5rem; color: var(--success);"></i>Confirm Password
                </label>
                <input 
                    type="password" 
                    id="password_confirm" 
                    name="password_confirm" 
                    required
                    class="form-control"
                    placeholder="Re-enter your password"
                >
                <div id="passwordMatch" class="text-xs mt-1 hidden">
                    <span class="text-red-600">Passwords do not match</span>
                </div>
            </div>
            
            <button type="submit" class="btn btn-success w-full">
                <i class="fas fa-plus mr-2"></i>Create Account
            </button>
        </form>

        <div class="text-center mt-6">
            <p style="color: var(--text);">
                Already have an account? 
                <a href="{% url 'accounts:login' %}" style="font-weight: 700; color: var(--primary); text-decoration: none;">
                    Sign in <i class="fas fa-arrow-right ml-1"></i>
                </a>
            </p>
        </div>
    </div>
</div>

{% endblock %}

{% block extra_js %}
<script>
$(document).ready(function() {
    $('#password_confirm').on('input', function() {
        const password = $('#password').val();
        const confirm = $(this).val();
        const matchDiv = $('#passwordMatch');
        
        if (confirm && password !== confirm) {
            matchDiv.removeClass('hidden');
        } else {
            matchDiv.addClass('hidden');
        }
    });
    
    $('#registerForm').submit(function(e) {
        const password = $('#password').val();
        const confirm = $('#password_confirm').val();
        
        if (password !== confirm) {
            e.preventDefault();
            $('#passwordMatch').removeClass('hidden');
            return false;
        }
    });
});
</script>
{% endblock %}
